name: Daily Script Runner

on:
    schedule:

        - cron: '0 0 * * *'

    workflow_dispatch: 

jobs: 
    run-typescript:
        runs-on: ubuntu-latest

        steps:
             - name: Checkout Code
               uses: actions/checkout@v4

             - name: Setup Node.js
               uses: actions/setup-node@v4
               with:
                node-version: '20'
                cache: 'npm'

             - name: Install Dependencies
               run: npm ci

             - name: Run All Scripts
               env:
                 NEXT_PUBLIC_SUPABASE_URL: ${{secrets.NEXT_PUBLIC_SUPABASE_URL}}
                 SUPABASE_SERVICE_KEY: ${{secrets.SUPABASE_SERVICE_KEY}}
                 GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
               
               run: npx tsx src/lib/runScripts.ts
